# 第十三章	类继承



​	转换笔记的格式，贴合本章内容记下关键语句和自我的思考即可。之前笔记充满太多重复。

## 本章内容：

- is - a 关系的继承
- 如何以公有方式从一个类派生出另一个类
- 保护访问
- 构造函数成员初始化列表
- 向上和向下强制转换
- 虚成员函数
- 早期（静态）联编与晚期（动态）联编
- 抽象基类
- 纯虚函数
- 何时及如何使用公有继承

### is - a 关系的继承

通过继承可以完成：

- 可以在已有的类的基础上添加功能。
- 可以给类添加数据。
- 可以修改类方法的行为。

​	

### 如何以公有方式从一个类派生出另一个类

​	如下

```C++
class RatedPlayer : public TableTennisPlayer{
	....
}; 
```

通过基类派生的类具有以下特性：

- 派生类对象存储了基类的数据成员；

- 派生类对象可以使用基类的方法；

  

​	派生类可以继承基类的数据成员与方法，同时也可以在派生类中添加自己的数据成员与方法：

- 派生类需要自己的构造函数
- 派生类可以根据需要添加额外的数据成员和成员函数

### 	保护访问

​	派生类不能直接访问基类的私有成员，而必须通过基类方法进行访问。派生类可以使用基类的构造函数来初始化无法访问的基类私有成员。要点如下：

- 派生类构造函数应通过成员初始化列表将基类信息传递给基类构造函数；
- 派生类构造函数应初始化派生类新增的数据成员；

### 创建派生类对象时，需注意的事项：

​	创建派生类对象时，程序首先调用基类构造函数，然后再调用派生类构造函数。基类构造函数负责初始化继承的数据成员；派生类构造函数主要用于初始化新增的数据成员。派生类的构造函数总是调用一个基类构造函数。可以初始化器列表语法指明要使用的基类构造函数，否则将使用默认的基类构造函数。

​	派生类对象过期时，程序将首先调用派生类析构函数，然后调用基类析构函数。

### 成员初始化列表

​	 

```
derived::derived(type1 x, type2 y) : base(x, y){
	...
}
```

​	derived是派生类，base是基类。



### 向上和向下强制转换

​	

## 虚成员函数（虚方法）

​	在类方法声明前加上关键字virtual,该方法被称为虚成员函数（或叫虚方法）。
​	关键字virtual主要用于对基类方法的重载。
​	如果方法是投过引用或指针而不是对象调用的，它将确定使用基类的方法还是派生类的方法：

- 如果派生类方法没有使用关键字virtual，程序将根据引用的类型或指针的类型来选择使用基类还是派生类的方法。（例如：如果引用类型是基类的引用，而引用的对象却是派生类，那么程序将使用基类的方法。）
- 如果派生类的方法使用了关键字virtual，程序将工具引用指向的对象或指针指向的对象的类型来选择方法。（例如：如果引用的类型是基类的引用，而引用的对象却是派生类，程序仍然使用派生类的方法，这跟没用使用关键字virtual的情况不同。）

​	
