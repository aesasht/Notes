# 第八章		函数探幽



### 8.0 函数的调用

​	执行到函数调用指令时，程序将在函数调用后立即存储该指令的内存地址，并将函数参数复制到堆栈（为此保留的内存块），跳到标记函数起点的内存单元执行函数代码（也许还需要返回值放入寄存器中），然后调回到地址被保存的指令处。来回跳跃并记录跳跃位置意味着使用常规函数时需要一定的开销。





### 8.1	内联函数

​	内敛函数是C++为提高程序运行速度所做的一项改进。
​	内敛函数区别于常规函数，使用内敛函数后，编译器将使用相应的函数代码替换函数调用。对于内敛代码，程序无需跳到另外一个位置处来执行代码，再跳回来。
​	在函数声明和定义前加上关键字inline以使用C++的内敛函数。
​	内敛函数的定义一般不大（过大的内敛函数将造成巨量的内存冗余）
​	C语言使用预处理器语句#define来提供宏，这是C++内敛函数的原始实现。
​	内联函数无法递归。

```C
#define Square(X) X*X

```

```c++
inline double Square(double x){
	return X*X;
}
```

### 8.2	引用变量

​	C++新镇了一种复合变量——引用变量。引用是已定义变量的别名。

#### 	8.2.1	创建引用变量

​	C和C++使用&符号来指示变量的地址。C++给&符号赋予了另外一个含义，将其用来声明引用。例如，要将rodents作为rats变量的别名：

```C
int rats;
int & rodents = rats;//makes rodents an alias for rats
```

​	其中&不是地址运算符，而是类似标识符的一部分。就像声明中的char*指的是指向char的指针一样，int &指的是指向int的引用。

### 8.3	默认参数

```c++
void wow(int n = 1){
    if(n==1)
		cout<<"wow"<<endl;
    else
        cout<<"wowwowwow"<<endl;
}
```

​	默认参数指的是当函数调用中省略了实参时自动使用的一个值。如果省略参数n，则n的值默认地为1；否者，将会覆盖掉默认的值.

### 8.4	函数重载

​	函数重载（多态）是C++在C语言的基础上新增的功能。函数重载（多态）让您能够使用多个同名函数（参数不同）。

### 8.5	函数模板

​	函数模板是通用的函数描述，也就是说，它们使用泛型来定义函数，其中的泛型可用具体的类型来替换。通过将类型作为参数传递给模板，可使编译器生成该类型的函数。
​	例如，可以这样建立一个交换模板:

```C++
template <typename AnyType>
void Swap(AnyType &a, AnyType &b){
	AnyType temp;
    temp = a;
    a = b;
    b = temp;
}

```

​	第一行指出，要建立一个模板，并将其命名为AnyType。关键字template和typename是必需的，除非使用class来代替typename。另外，必须使用尖括号。
​	如果需要多个将同一算法用于不同类型函数，请使用模板。

#### 8.5.1	重载的模板

​	可以像常规函数定义那样重载模板定义。

#### 8.5.2	模板的局限性

